import{j as d}from"./jsx-runtime-3cfe299f.js";import{r as t}from"./index-c4905b50.js";import{_ as i}from"./extends-98964cd2.js";import{$ as N,c as G}from"./index-ad15057c.js";import{a as _,$ as D,b as W,e as U}from"./index-e64c434c.js";import{$ as V,a as m}from"./index-027e524b.js";import{$ as E}from"./index-c7280168.js";import{$ as H}from"./index-bdfe594c.js";import{a as q,$ as K,b as Y}from"./Combination-e8d58b68.js";import{$ as Z}from"./index-18b101ff.js";import{$ as C}from"./index-2634669d.js";import{h as J}from"./index-335037e7.js";import{c as b}from"./cn-ad0adaed.js";import{B as h}from"./Button-920fa71e.js";import"./_commonjsHelpers-042e6b4d.js";import"./index-07d1f67e.js";const T="Dialog",[M,I]=N(T),[Q,u]=M(T),X=e=>{const{__scopeDialog:o,children:a,open:c,defaultOpen:r,onOpenChange:n,modal:s=!0}=e,l=t.useRef(null),f=t.useRef(null),[$=!1,g]=V({prop:c,defaultProp:r,onChange:n});return t.createElement(Q,{scope:o,triggerRef:l,contentRef:f,contentId:E(),titleId:E(),descriptionId:E(),open:$,onOpenChange:g,onOpenToggle:t.useCallback(()=>g(z=>!z),[g]),modal:s},a)},ee="DialogTrigger",te=t.forwardRef((e,o)=>{const{__scopeDialog:a,...c}=e,r=u(ee,a),n=_(o,r.triggerRef);return t.createElement(D.button,i({type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":w(r.open)},c,{ref:n,onClick:m(e.onClick,r.onOpenToggle)}))}),S="DialogPortal",[oe,j]=M(S,{forceMount:void 0}),ae=e=>{const{__scopeDialog:o,forceMount:a,children:c,container:r}=e,n=u(S,o);return t.createElement(oe,{scope:o,forceMount:a},t.Children.map(c,s=>t.createElement(C,{present:a||n.open},t.createElement(Z,{asChild:!0,container:r},s))))},A="DialogOverlay",ce=t.forwardRef((e,o)=>{const a=j(A,e.__scopeDialog),{forceMount:c=a.forceMount,...r}=e,n=u(A,e.__scopeDialog);return n.modal?t.createElement(C,{present:c||n.open},t.createElement(re,i({},r,{ref:o}))):null}),re=t.forwardRef((e,o)=>{const{__scopeDialog:a,...c}=e,r=u(A,a);return t.createElement(q,{as:W,allowPinchZoom:!0,shards:[r.contentRef]},t.createElement(D.div,i({"data-state":w(r.open)},c,{ref:o,style:{pointerEvents:"auto",...c.style}})))}),x="DialogContent",ne=t.forwardRef((e,o)=>{const a=j(x,e.__scopeDialog),{forceMount:c=a.forceMount,...r}=e,n=u(x,e.__scopeDialog);return t.createElement(C,{present:c||n.open},n.modal?t.createElement(se,i({},r,{ref:o})):t.createElement(le,i({},r,{ref:o})))}),se=t.forwardRef((e,o)=>{const a=u(x,e.__scopeDialog),c=t.useRef(null),r=_(o,a.contentRef,c);return t.useEffect(()=>{const n=c.current;if(n)return J(n)},[]),t.createElement(F,i({},e,{ref:r,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:m(e.onCloseAutoFocus,n=>{var s;n.preventDefault(),(s=a.triggerRef.current)===null||s===void 0||s.focus()}),onPointerDownOutside:m(e.onPointerDownOutside,n=>{const s=n.detail.originalEvent,l=s.button===0&&s.ctrlKey===!0;(s.button===2||l)&&n.preventDefault()}),onFocusOutside:m(e.onFocusOutside,n=>n.preventDefault())}))}),le=t.forwardRef((e,o)=>{const a=u(x,e.__scopeDialog),c=t.useRef(!1),r=t.useRef(!1);return t.createElement(F,i({},e,{ref:o,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{var s;if((s=e.onCloseAutoFocus)===null||s===void 0||s.call(e,n),!n.defaultPrevented){var l;c.current||(l=a.triggerRef.current)===null||l===void 0||l.focus(),n.preventDefault()}c.current=!1,r.current=!1},onInteractOutside:n=>{var s,l;(s=e.onInteractOutside)===null||s===void 0||s.call(e,n),n.defaultPrevented||(c.current=!0,n.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const f=n.target;((l=a.triggerRef.current)===null||l===void 0?void 0:l.contains(f))&&n.preventDefault(),n.detail.originalEvent.type==="focusin"&&r.current&&n.preventDefault()}}))}),F=t.forwardRef((e,o)=>{const{__scopeDialog:a,trapFocus:c,onOpenAutoFocus:r,onCloseAutoFocus:n,...s}=e,l=u(x,a),f=t.useRef(null),$=_(o,f);return K(),t.createElement(t.Fragment,null,t.createElement(Y,{asChild:!0,loop:!0,trapped:c,onMountAutoFocus:r,onUnmountAutoFocus:n},t.createElement(H,i({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":w(l.open)},s,{ref:$,onDismiss:()=>l.onOpenChange(!1)}))),!1)}),k="DialogTitle",de=t.forwardRef((e,o)=>{const{__scopeDialog:a,...c}=e,r=u(k,a);return t.createElement(D.h2,i({id:r.titleId},c,{ref:o}))}),ie="DialogDescription",fe=t.forwardRef((e,o)=>{const{__scopeDialog:a,...c}=e,r=u(ie,a);return t.createElement(D.p,i({id:r.descriptionId},c,{ref:o}))}),$e="DialogClose",ue=t.forwardRef((e,o)=>{const{__scopeDialog:a,...c}=e,r=u($e,a);return t.createElement(D.button,i({type:"button"},c,{ref:o,onClick:m(e.onClick,()=>r.onOpenChange(!1))}))});function w(e){return e?"open":"closed"}const pe="DialogTitleWarning",[ge,ft]=G(pe,{contentName:x,titleName:k,docsSlug:"dialog"}),be=X,me=te,xe=ae,_e=ce,De=ne,ve=de,Ee=fe,L=ue,he="AlertDialog",[Ae,$t]=N(he,[I]),p=I(),Re=e=>{const{__scopeAlertDialog:o,...a}=e,c=p(o);return t.createElement(be,i({},c,a,{modal:!0}))},Ce=t.forwardRef((e,o)=>{const{__scopeAlertDialog:a,...c}=e,r=p(a);return t.createElement(me,i({},r,c,{ref:o}))}),we=e=>{const{__scopeAlertDialog:o,...a}=e,c=p(o);return t.createElement(xe,i({},c,a))},ye=t.forwardRef((e,o)=>{const{__scopeAlertDialog:a,...c}=e,r=p(a);return t.createElement(_e,i({},r,c,{ref:o}))}),B="AlertDialogContent",[Oe,Pe]=Ae(B),Ne=t.forwardRef((e,o)=>{const{__scopeAlertDialog:a,children:c,...r}=e,n=p(a),s=t.useRef(null),l=_(o,s),f=t.useRef(null);return t.createElement(ge,{contentName:B,titleName:Te,docsSlug:"alert-dialog"},t.createElement(Oe,{scope:a,cancelRef:f},t.createElement(De,i({role:"alertdialog"},n,r,{ref:l,onOpenAutoFocus:m(r.onOpenAutoFocus,$=>{var g;$.preventDefault(),(g=f.current)===null||g===void 0||g.focus({preventScroll:!0})}),onPointerDownOutside:$=>$.preventDefault(),onInteractOutside:$=>$.preventDefault()}),t.createElement(U,null,c),!1)))}),Te="AlertDialogTitle",Me=t.forwardRef((e,o)=>{const{__scopeAlertDialog:a,...c}=e,r=p(a);return t.createElement(ve,i({},r,c,{ref:o}))}),Ie=t.forwardRef((e,o)=>{const{__scopeAlertDialog:a,...c}=e,r=p(a);return t.createElement(Ee,i({},r,c,{ref:o}))}),Se=t.forwardRef((e,o)=>{const{__scopeAlertDialog:a,...c}=e,r=p(a);return t.createElement(L,i({},r,c,{ref:o}))}),je="AlertDialogCancel",Fe=t.forwardRef((e,o)=>{const{__scopeAlertDialog:a,...c}=e,{cancelRef:r}=Pe(je,a),n=p(a),s=_(o,r);return t.createElement(L,i({},n,c,{ref:s}))}),ke=Re,Le=Ce,Be=we,ze=ye,Ge=Ne,We=Se,Ue=Fe,Ve=Me,He=Ie;function R({onAction:e}){const[o,a]=t.useState(!1);return d.jsxs(ke,{open:o,onOpenChange:a,children:[d.jsx(Le,{asChild:!0,children:d.jsx(h,{children:"Show Dialog"})}),d.jsxs(Be,{children:[d.jsx(ze,{className:b(["data-[state=open]:animate-in","data-[state=open]:duration-200","data-[state=open]:fade-in-0"],["data-[state=closed]:animate-out","data-[state=closed]:duration-200","data-[state=closed]:fade-out-0"],"fixed inset-0 z-50 bg-black/30 backdrop-blur-sm")}),d.jsx(Ge,{className:b(["fixed left-1/2 top-1/2 z-50 max-w-lg","-translate-x-1/2 -translate-y-1/2","grid w-full gap-4","border bg-white p-6 shadow-lg sm:rounded-lg md:w-full",["data-[state=open]:animate-in","data-[state=open]:duration-200","data-[state=open]:-enter-translate-x-1/2","data-[state=open]:-enter-translate-y-1/2","data-[state=open]:fade-in-0","data-[state=open]:zoom-in-95"],["data-[state=closed]:animate-out","data-[state=closed]:duration-200","data-[state=closed]:-exit-translate-x-1/2","data-[state=closed]:-exit-translate-y-1/2","data-[state=closed]:fade-out-0","data-[state=closed]:zoom-out-95"]]),children:d.jsx(qe,{onAction:e})})]})]})}function qe({onAction:e}){const[o,a]=t.useState("idle"),[c,r]=t.useState(!1),n=t.useRef(null);t.useEffect(()=>{if(o==="success"){const l=setTimeout(()=>{r(!0)},1e3);return()=>clearTimeout(l)}},[o]),t.useEffect(()=>{c&&setTimeout(()=>{n.current&&(n.current.style.display="none")},1e3)},[c]);const s=t.useCallback(l=>{l.preventDefault();try{a("loading");const f=e==null?void 0:e(l);f instanceof Promise?f.then(()=>{a("success")}).catch($=>{console.error($),a("error")}):a("success")}catch(f){console.error(f),a("error")}},[e]);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:b("flex flex-col space-y-2 text-center sm:text-left"),children:[d.jsx(Ve,{children:"Are you absolutely sure?"}),d.jsx(He,{className:b("text-muted-foreground text-sm"),children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers."})]}),d.jsxs("div",{className:b("flex flex-col-reverse sm:flex-row sm:justify-end"),children:[d.jsx(Ue,{asChild:!0,children:d.jsx(h,{disabled:o==="loading",className:b("w-[100px]"),children:"Close"})}),d.jsx(We,{asChild:!0,children:d.jsx(h,{preventInteraction:o!=="idle",ref:n,onClick:s,variant:"destructive",className:b(c?"m-0 w-0 border-0 p-0 opacity-0":"ml-2 w-[100px]","transition-all",o==="loading"&&"border-yellow-500 bg-yellow-500 text-white hover:bg-yellow-500",o==="success"&&"border-green-700 bg-green-700 text-white hover:bg-green-700"),children:o==="idle"?"Continue":o==="loading"?d.jsx(Ke,{}):o==="success"?"Done!":"Error"})})]})]})}function Ke(){return d.jsxs("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}try{R.displayName="AlertDialog",R.__docgenInfo={description:"",displayName:"AlertDialog",props:{onAction:{defaultValue:null,description:"Action to perform when the user clicks the action button.",name:"onAction",required:!1,type:{name:"((event: MouseEvent<HTMLButtonElement, MouseEvent>) => void | Promise<void>)"}}}}}catch{}const ut={component:R,parameters:{layout:"centered"},tags:["autodocs"]},v={args:{onAction:async()=>new Promise(e=>{setTimeout(()=>{e()},2e3)})}};var y,O,P;v.parameters={...v.parameters,docs:{...(y=v.parameters)==null?void 0:y.docs,source:{originalSource:`{
  args: {
    onAction: async () => {
      return new Promise(resolve => {
        setTimeout(() => {
          resolve();
        }, 2000);
      });
    }
  }
}`,...(P=(O=v.parameters)==null?void 0:O.docs)==null?void 0:P.source}}};const pt=["BasicUsage"];export{v as BasicUsage,pt as __namedExportsOrder,ut as default};
//# sourceMappingURL=AlertDialog.stories-e75145d4.js.map
